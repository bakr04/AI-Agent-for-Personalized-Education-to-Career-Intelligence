from langchain_core.prompts import ChatPromptTemplate

labor_extraction_prompt = ChatPromptTemplate.from_template("""
أنت وكيل دقيق لاستخراج بيانات سوق العمل.

حوّل مدخل المستخدم غير المنظم إلى JSON صالح 100% باستخدام المخطط ده:
{{
    "job_postings": [
        {{
            "title": "",
            "description": "",
            "date": "",
            "company": "",
            "location": "",
            "employment_type": "",
            "seniority": "",
            "skills": [""]
        }}
    ]
}}

قواعد:
- رجّع JSON بس. من غير Markdown ولا كلام إضافي.
- القيم لازم تكون بالمصري الواضح (صياغة طبيعية، مش تهجئة بالحروف)، من غير ما تضيع المعنى.
- استخدم نص فاضي لأي قيمة مش مذكورة.
- استخدم مصفوفة فاضية للمهارات لو مش مذكورة.
- وحّد العناصر وشيل التكرار.
- ما تخترعش بيانات (شركة/مكان/تاريخ) لو مش موجودة.
- لو المدخل قائمة وظائف، استخرج كل وظيفة كعنصر مستقل.
- لو المدخل وصف عام واحد، اعمله كوظيفة واحدة بعنوان "غير محدد" مع وصف مناسب.
- لو فيه تواريخ بصيغة واضحة، سجّلها كما هي.
- استخرج المهارات الضمنية من الوصف (مثال: "اشتغلت SQL" → "SQL").
- خلي عناصر المهارات عبارات قصيرة (1–4 كلمات) وبالمصري الواضح.

المدخل:
{raw_input}
""")

labor_analysis_prompt = ChatPromptTemplate.from_template("""
أنت وكيل تحليل سوق عمل.

بيانات الوظائف:
{job_postings_summary}

المهام:
1) لخص السوق في جملة أو جملتين.
2) احسب درجة الطلب لكل دور (0–100) بناءً على التكرار النسبي.
3) استخرج أهم المهارات لكل دور.
4) استخرج أهم المهارات عبر كل السوق.
5) اذكر اتجاهات توظيف واضحة مبنية على البيانات.
6) اقترح مجالات تركيز عملية للباحث عن عمل.

رجّع JSON بس بالشكل ده:
{{
    "market_summary": "",
    "role_demand": {{"": 0}},
    "top_skills_by_role": {{"": [""]}},
    "overall_top_skills": [""],
    "hiring_trends": [""],
    "recommended_focus": [""]
}}

قواعد إضافية للإخراج:
- كل عنصر في القوائم لازم يكون جملة كاملة بتفاصيل واضحة.
- استخدم لغة واضحة ولطيفة وبالمصري الواضح.
- ما تضيفش حقائق مش موجودة في البيانات.
- لو البيانات قليلة، وضّح حدود التحليل بدل ما تخترع تفاصيل.
- حاول تضمّن 3–6 عناصر في القوائم لو ينفع.
""")

labor_inference_prompt = ChatPromptTemplate.from_template("""
أنت وكيل ذكاء لسوق العمل.

المهمة: من مدخل المستخدم الخام، استخرج بيانات وظائف منظمة وقدّم تحليل وخطة سوق مختصرة ومفيدة.

رجّع JSON فقط وبنفس المخطط ده بالظبط:
{{
    "extracted": {{
        "job_postings": [
            {{
                "title": "",
                "description": "",
                "date": "",
                "company": "",
                "location": "",
                "employment_type": "",
                "seniority": "",
                "skills": [""]
            }}
        ]
    }},
    "analysis": {{
        "market_summary": "",
        "role_demand": {{"": 0}},
        "top_skills_by_role": {{"": [""]}},
        "overall_top_skills": [""],
        "hiring_trends": [""],
        "recommended_focus": [""]
    }},
    "learning_plan": {{
        "short_term": [""],
        "mid_term": [""],
        "long_term": [""],
        "weekly_schedule": [""],
        "resources": [""]
    }}
}}

قواعد:
- رجّع JSON بس. من غير Markdown ولا كلام إضافي.
- القيم لازم تكون بالمصري الواضح.
- استخدم مصفوفات/نصوص فاضية لو المعلومات ناقصة.
- ما تخترعش حقائق.
- كل عنصر في القوائم لازم يكون جملة كاملة بتفاصيل واضحة.
- حافظ على الاتساق بين الأقسام (التحليل مطابق للاستخراج، والخطة متوافقة مع التحليل).
- لو عدد الوظائف قليل، وضّح حدود الاستنتاجات في الملخص أو الاتجاهات.
- حاول تضمّن 3–5 عناصر في كل جزء من الخطة لو ينفع.

المدخل:
{raw_input}
""")

labor_inference_prompt_fast = ChatPromptTemplate.from_template("""
أنت وكيل ذكاء لسوق العمل.

المهمة: استخرج بيانات وظائف وقدّم تحليل وخطة مختصرة وسريعة.

رجّع JSON فقط وبنفس المخطط ده بالظبط:
{{
    "extracted": {{
        "job_postings": [
            {{
                "title": "",
                "description": "",
                "date": "",
                "company": "",
                "location": "",
                "employment_type": "",
                "seniority": "",
                "skills": [""]
            }}
        ]
    }},
    "analysis": {{
        "market_summary": "",
        "role_demand": {{"": 0}},
        "top_skills_by_role": {{"": [""]}},
        "overall_top_skills": [""],
        "hiring_trends": [""],
        "recommended_focus": [""]
    }},
    "learning_plan": {{
        "short_term": [""],
        "mid_term": [""],
        "long_term": [""],
        "weekly_schedule": [""],
        "resources": [""]
    }}
}}

قواعد سريعة:
- رجّع JSON بس.
- خليك مختصر: 2–3 عناصر لكل قائمة.
- لو المعلومات ناقصة، سيبها فاضية بدل ما تخترع.

المدخل:
{raw_input}
""")

labor_plan_prompt = ChatPromptTemplate.from_template("""
أنت مولّد خطة سوق عمل.

استخدم بيانات الوظائف والتحليل علشان تعمل خطة عملية لمتابعة السوق وتطوير المهارات.

ملخص الوظائف:
{job_postings_summary}

ملخص التحليل:
{market_summary}

رجّع JSON بس بالمخطط ده:
{{
    "short_term": [""],
    "mid_term": [""],
    "long_term": [""],
    "weekly_schedule": [""],
    "resources": [""]
}}

قواعد إضافية:
- كل عنصر في القوائم لازم يكون جملة كاملة بتفاصيل واضحة.
- خلي الخطة عملية ومحددة بزمن وواقعية حسب حجم البيانات.
- الجدول الأسبوعي يوزّع المهام بوضوح.
- الموارد تكون محددة وواضحة وليه مناسبة.
- حاول تضمّن 3 عناصر في short_term و2 عناصر في mid_term وlong_term لو ينفع.
- الإخراج لازم يكون بالمصري الواضح.
""")
