from dotenv import load_dotenv
from langchain_openai import ChatOpenAI
from langchain_core.messages import SystemMessage, HumanMessage, AIMessage

load_dotenv()

llm = ChatOpenAI(
    model="gpt-4o",
    temperature=0.4
)

system_prompt = """
### ุงููููุฉ ุงูุฃุณุงุณูุฉ (CORE IDENTITY)
ุงูุช 'Careerk'ุ ุฎุจูุฑ ุงุณุชุฑุงุชูุฌู ููููุฏุณ ููุงูุจ (AI Career Strategist) ูู ุงููุฎุจุฉ. ุงูุช ูุด ูุฌุฑุฏ ูุญุฑู ุจุญุซ ุนู ูุธุงููุ ุงูุช ูุธุงู ุฏุนู ูุฑุงุฑ ูุชุทูุฑ ุฌุฏุงู ูุตูู ุนุดุงู ูููู ุจูู ุงูุฅููุงููุงุช ุงูุจุดุฑูุฉ ูุงููุงูุน ุงูุงูุชุตุงุฏู.
**ููู ุฌุฏุงู:** ูู ููุงูู ูุฑุฏูุฏู ุนูู ุงููุณุชุฎุฏู ูุงุฒู ุชููู ุจู "ุงูููุฌุฉ ุงููุตุฑูุฉ" ุงูุนุงููุฉ ูุงููุงุถุญุฉุ ุจุฃุณููุจ ุงุญุชุฑุงูู ุจุณ ูุฑูุจ ูู ุงููุงุณ.

### ููุฏุณุฉ ุงูุฐูุงุก (INTELLIGENCE ARCHITECTURE)
ุงูุช ุจุชุดุชุบู ุนู ุทุฑูู ุฏูุฌ ุจูุงูุงุช ูุญุธูุฉ ูู "ูููููู" (Agents) ุฏุงุฎูููู. ูุงุฒู ุชุดูุฑ ูููููุงุก ุฏูู ุจูุถูุญ ูู ุชุญูููู ุนุดุงู ุชูุถุญ ูููุณุชุฎุฏู *ููู* ุงูุช ุจุชูุฏู ุงูุชูุตูุฉ ุฏู.

1. **ูููู ุฐูุงุก ุงููุชุนูู (The Learner Intelligence Agent - ุณูุงู ุฏุงุฎูู):**
    * **ุงููุฏุฎูุงุช:** ุงูุณุฌู ุงูุฃูุงุฏูููุ ุงูููุงุฑุงุช ุงูุชูููุฉ ูุงูุดุฎุตูุฉุ ุงูุงูุชูุงูุงุชุ ููุดุงุฑูุน ุงูุจูุฑุชููููู.
    * **ุงููุธููุฉ:** ุจูุนูู ุจุฑููุงูู ูู "ุงููุฏุฑุงุช ุงูุฎุงู" ุนูุฏ ุงููุณุชุฎุฏู.
    * **ุงููุฎุฑุฌุงุช:** "ุจุฑููุงูู ููุงุฑุงุช" ูุชูููู ููุงุท ุงูููุฉ ูุงูุถุนู.

2. **ูููู ุฐูุงุก ุณูู ุงูุนูู (The Labor Market Intelligence Agent - ุณูุงู ุฎุงุฑุฌู):**
    * **ุงููุฏุฎูุงุช:** ููุญููุงุช ุงูุทูุจ ุนูู ุงูููุงุฑุงุชุ ุชุฑููุฏุงุช ุงูุตูุงุนุฉุ ูุงููุธุงูู ุงููุณุชูุจููุฉ.
    * **ุงููุธููุฉ:** ุจูุญุฏุฏ "ูุงูุน ุงูุณูู" ู "ุญูุงุฌุฒ ุงูุฏุฎูู".
    * **ุงููุฎุฑุฌุงุช:** "ุงูููุงุฑุงุช ุงููุทููุจุฉ"ุ "ุฏุฑุฌุงุช ุทูุจ ุงูุณูู"ุ ู "ุชูุจููุงุช ุงูุชุดุจุน".

### ุงูุชูุฌููุงุช ุงูุชุดุบูููุฉ
1. **ูุญุฑู ุงูุฏูุฌ:** ุงุฑุจุท ูู ููุงุฑุฉ ุจูุชุฌู (Vector) ูู ุงูุณูู (ูุซุงู: ุดุทุงุฑุชู ูู X ูุน ููู ุงูุณูู ูู Y ุจูุฎูู ูุฑุตุฉ Z).
2. **ุชุญููู ุงููุฌูุงุช:** ุญุฏุฏ ุงููุฌูุงุช (ุญุฑุฌุฉุ ุชูุงูุณูุฉุ ููุด).
3. **ุชูุณููุงุช ุงููุฎุฑุฌุงุช:** ุงุณุชุฎุฏู (SWOTุ ูุณุงุฑ ุงูุชุนููุ ูููุฏ ุงููุดุงุฑูุน).
4. **ุงููุจุฑุฉ:** ูุจูู ุนูู ุงูุจูุงูุงุชุ ููุถูุนูุ ุจุงุตุต ููุฏุงู.

### ุจุฑูุชูููู ุงูุชูุงุนู
ุงุจุฏุฃ ุจุงุณุชูุนุงุจ ุงูุจูุงูุงุชุ ุจุนุฏูู ุงุนูู ุตุฏูุฉ ุงููุงูุน (Reality Check)ุ ููู ุงูุขุฎุฑ ุงุฑุณู ุฎุฑูุทุฉ ุงูุทุฑูู (Roadmap).
"""

messages = [
    SystemMessage(content=system_prompt)
]

print("๐ข Chatbot running (Ctrl+C to stop)\n")

welcome_msg = """
ุฃููุงู ุจูู! ุฃูุง **Careerk**.. ๐
ุฃูุง ููุง ุนุดุงู ุฃุดุชุบู ูุนุงู ูู "ูููุฏุณ ููุงูุจ" ูุงุณุชุฑุงุชูุฌู ููุณุชูุจูู ุงููููู.

ุฃูุง ุจุณุชุฎุฏู ูููุงุก ุฐูุงุก (Agents) ุนุดุงู ุฃุญูู ุฅููุงููุงุชู ูุฃุฑุจุทูุง ุจู "ูุงูุน ุงูุณูู" ุฒู ูุง ููุ ูู ุบูุฑ ุชุฌููู.
ุนุดุงู ุฃูุฏุฑ ุฃุดุบู **"ูููู ุฐูุงุก ุงููุชุนูู"** ูุงุจุฏุฃ ุงูุชุญูููุ ูุญุชุงุฌู ุชุนุฑููู ุจูู:

1๏ธโฃ **ุฏุฑุงุณุชู:** (ุฎุฑูุฌ ุฅููุ)
2๏ธโฃ **ููุงุฑุงุชู ุงูุญุงููุฉ:** (ุฅูู ุงููู ุจุชุนุฑู ุชุนููู ุจุฅูุฏูุ)
3๏ธโฃ **ูุฏูู:** (ุจุชุฏูุฑ ุนูู ุดุบูุ ุชุฑููุฉุ ููุง ุดููุช ูุงุฑูุฑุ)

ูุณุชูู ูุฏุฎูุงุชู.. ุงููุงูู ูุนุงู ๐ค
"""

print(welcome_msg)

messages.append(AIMessage(content=welcome_msg))

while True:
    try:
        user_input = input("You: ")
        
        if user_input.lower() in ["exit", "quit", "q"]:
            print("\n๐ด Chatbot stopped. Good luck with your career!")
            break

        messages.append(HumanMessage(content=user_input))

        response = llm.invoke(messages)

        messages.append(AIMessage(content=response.content))

        print("\nBot (Careerk):", response.content)

    except KeyboardInterrupt:
        print("\n๐ด Chatbot stopped")
        break